@page "/Error"
@using System.Diagnostics

<PageTitle>Error - LearnStack</PageTitle>

<div class="error-container">
    <div class="error-card">
        <div class="error-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="#ef4444">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
            </svg>
        </div>
        <h1>Oops! Something went wrong.</h1>
        <p class="error-subtitle">An error occurred while processing your request.</p>

        @if (ShowRequestId)
        {
            <div class="request-id-box">
                <strong>Request ID:</strong> <code>@RequestId</code>
            </div>
        }

        <div class="error-actions">
            <a href="/" class="btn-primary">Return to Home</a>
        </div>
    </div>
</div>

<style>
    .error-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f8fafc;
        padding: 20px;
    }

    .error-card {
        background: white;
        border-radius: 24px;
        box-shadow: 0 10px 25px -5px rgba(15, 23, 42, 0.05), 0 8px 10px -6px rgba(15, 23, 42, 0.01);
        border: 1px solid #e2e8f0;
        padding: 48px 40px;
        width: 100%;
        max-width: 500px;
        text-align: center;
    }

    .error-icon {
        margin-bottom: 24px;
    }

    .error-card h1 {
        font-size: 1.75rem;
        font-weight: 700;
        color: #0f172a;
        margin: 0 0 12px 0;
        letter-spacing: -0.5px;
    }

    .error-subtitle {
        color: #64748b;
        font-size: 1.1rem;
        margin: 0 0 32px 0;
    }

    .request-id-box {
        background-color: #f1f5f9;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 32px;
        color: #475569;
        font-size: 0.9rem;
        border: 1px solid #e2e8f0;
    }

    .request-id-box code {
        background: white;
        padding: 4px 8px;
        border-radius: 6px;
        color: #0f172a;
        font-weight: 600;
        border: 1px solid #cbd5e1;
    }

    .error-actions {
        display: flex;
        justify-content: center;
    }

    .btn-primary {
        display: inline-block;
        padding: 14px 32px;
        background: linear-gradient(135deg, #4f46e5, #6366f1);
        color: white;
        text-decoration: none;
        border-radius: 12px;
        font-weight: 600;
        transition: all 0.2s;
        box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2);
    }

    .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 8px -1px rgba(79, 70, 229, 0.3);
        color: white;
    }
</style>

@code{
    [CascadingParameter] private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;

}